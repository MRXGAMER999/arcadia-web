<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delete Account | Arcadia</title>
    <link rel="shortcut icon" href="../logo.svg" type="image/x-icon">
    <meta name="description" content="Request deletion of your Arcadia account and data.">

    <!-- Critical CSS to prevent FOUC -->
    <style>
        body {
            background-color: #0F0F23;
            color: #ffffff;
            font-family: sans-serif;
            margin: 0;
            opacity: 1;
        }

        .glass-fallback {
            background: rgba(30, 42, 71, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
    </style>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@300;400;500;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        navy: {
                            900: '#0F0F23',
                            800: '#151530',
                            700: '#1E1E3F',
                        },
                        violet: {
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            glow: '#A78BFA',
                        },
                        red: {
                            500: '#ef4444',
                            600: '#FF1744',
                        }
                    },
                    fontFamily: {
                        display: ['"Bebas Neue"', 'sans-serif'],
                        body: ['"Outfit"', 'sans-serif'],
                        mono: ['"JetBrains Mono"', 'monospace'],
                    },
                    backgroundImage: {
                        'hero-glow': 'radial-gradient(circle at 50% 50%, rgba(124, 58, 237, 0.15) 0%, rgba(15, 15, 35, 0) 70%)',
                        'noise': "url('https://grainy-gradients.vercel.app/noise.svg')",
                    }
                }
            }
        }
    </script>

    <style type="text/tailwindcss">
        @layer base {
            body::before {
                content: "";
                @apply fixed inset-0 bg-noise opacity-[0.03] pointer-events-none z-[60];
            }
        }
        @layer utilities {
            .glass-panel {
                @apply bg-navy-800/40 backdrop-blur-xl border border-white/10;
            }
            .glass-card {
                @apply bg-navy-800/60 backdrop-blur-md border border-white/5 hover:border-white/20 transition-all duration-300;
            }
            .text-glow {
                text-shadow: 0 0 30px rgba(139, 92, 246, 0.5);
            }
        }
    </style>
</head>

<body class="bg-navy-900 text-white antialiased overflow-x-hidden selection:bg-violet-600 selection:text-white">
    <!-- Background Effects -->
    <div class="absolute inset-0 pointer-events-none">
        <div
            class="absolute top-1/4 left-1/4 w-96 h-96 bg-red-600/20 blur-[120px] rounded-full mix-blend-screen animate-pulse">
        </div>
        <div
            class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-violet-600/10 blur-[120px] rounded-full mix-blend-screen">
        </div>
    </div>
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 px-4 bg-navy-900/90 backdrop-blur-md border-b border-white/10 py-3 shadow-2xl">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <!-- Logo -->
            <a href="../index.html" class="flex items-center">
                <span class="font-display text-3xl tracking-wide flex items-center pt-1 gap-0.5">
                    <span>A</span>
                    <svg class="h-7 w-7 mb-1" xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="30 30 320 320">
                        <defs>
                            <clipPath id="1bc524fdbf">
                                <path
                                    d="M 135 59.429688 L 329.863281 59.429688 L 329.863281 324.929688 L 135 324.929688 Z M 135 59.429688 "
                                    clip-rule="nonzero"></path>
                            </clipPath>
                            <clipPath id="b307a93635">
                                <path
                                    d="M 53.863281 59.429688 L 179 59.429688 L 179 126 L 53.863281 126 Z M 53.863281 59.429688 "
                                    clip-rule="nonzero"></path>
                            </clipPath>
                            <clipPath id="0f2c6a1c71">
                                <path d="M 136 92 L 297 92 L 297 324.929688 L 136 324.929688 Z M 136 92 "
                                    clip-rule="nonzero"></path>
                            </clipPath>
                            <clipPath id="f8e2f9d8ea">
                                <path
                                    d="M 53.863281 59.429688 L 179 59.429688 L 179 126 L 53.863281 126 Z M 53.863281 59.429688 "
                                    clip-rule="nonzero"></path>
                            </clipPath>
                        </defs>
                        <g clip-path="url(#1bc524fdbf)">
                            <path fill="#fbb02e"
                                d="M 258.703125 245.925781 L 311.164062 324.566406 L 230.675781 324.566406 L 180.15625 248.816406 L 135.984375 182.53125 C 135.984375 182.53125 235.371094 182.53125 235.410156 182.53125 C 250.863281 182.53125 263.820312 169.5625 263.820312 154.125 C 263.820312 138.453125 251.082031 125.714844 235.410156 125.714844 L 211.5 125.714844 L 167.328125 59.429688 L 235.410156 59.429688 C 287.726562 59.429688 330.101562 101.808594 330.101562 154.125 C 330.101562 180.257812 319.496094 203.933594 302.355469 221.070312 C 290.578125 232.847656 274.832031 241.8125 258.703125 245.925781 "
                                fill-opacity="1" fill-rule="evenodd"></path>
                        </g>
                        <g clip-path="url(#b307a93635)">
                            <path fill="#e8e5de"
                                d="M 178.582031 125.714844 L 98.089844 125.714844 L 53.898438 59.429688 L 134.398438 59.429688 Z M 178.582031 125.714844 "
                                fill-opacity="1" fill-rule="evenodd"></path>
                        </g>
                        <g clip-path="url(#0f2c6a1c71)">
                            <path fill="#fbb02e"
                                d="M 234.335938 217.777344 L 203.699219 217.777344 L 224.320312 248.78125 L 274.84375 324.566406 L 230.652344 324.566406 L 198.839844 276.769531 L 136.015625 182.5 C 136.015625 182.5 235.371094 182.5 235.441406 182.5 C 250.832031 182.5 263.796875 169.539062 263.796875 154.144531 C 263.796875 138.457031 251.054688 125.714844 235.441406 125.714844 L 211.515625 125.714844 L 189.425781 92.574219 L 234.335938 92.574219 C 268.953125 92.574219 296.9375 120.632812 296.9375 155.175781 C 296.9375 189.71875 268.953125 217.777344 234.335938 217.777344 "
                                fill-opacity="1" fill-rule="evenodd"></path>
                        </g>
                        <g clip-path="url(#f8e2f9d8ea)">
                            <path fill="#e8e5de"
                                d="M 53.898438 59.429688 L 98.089844 125.714844 L 178.582031 125.714844 L 156.488281 92.574219 L 122.957031 92.574219 C 97.167969 92.574219 72.660156 81.308594 55.875 61.734375 Z M 53.898438 59.429688 "
                                fill-opacity="1" fill-rule="evenodd"></path>
                        </g>
                    </svg>
                    <span>CADIA</span>
                </span>
            </a>

            <!-- Back to Home -->
            <a href="../index.html"
                class="bg-white text-navy-900 px-6 py-2.5 rounded-full font-body font-bold text-sm tracking-wide hover:bg-violet-200 transition-all shadow-[0_0_20px_rgba(255,255,255,0.2)] cursor-pointer focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-400/70 focus-visible:ring-offset-2 focus-visible:ring-offset-navy-900">
                <i class="fa-solid fa-arrow-left mr-2"></i>BACK TO HOME
            </a>
        </div>
    </nav>

    <!-- Hero Section -->
    <header
        class="relative min-h-[40vh] flex flex-col justify-center items-center text-center px-4 overflow-hidden pt-32 pb-16">


        <div class="relative z-10 max-w-4xl mx-auto">
            <h1 class="font-display text-6xl sm:text-7xl md:text-8xl leading-[0.9] tracking-tight mb-6">
                <span
                    class="text-transparent bg-clip-text bg-gradient-to-r from-red-400 via-red-200 to-white text-glow">DELETE</span><br>
                <span class="text-white">ACCOUNT</span>
            </h1>
            <p class="font-body text-slate-400 text-lg md:text-xl max-w-2xl mx-auto font-light leading-relaxed">
                Request permanent deletion of your Arcadia account and all associated data.
            </p>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-6 pb-32">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

            <!-- Main Form -->
            <div class="lg:col-span-2">
                <div class="glass-card rounded-2xl p-8">
                    <h2 class="font-display text-3xl mb-6 text-white">REQUEST FORM</h2>

                    <form id="deleteForm" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="userEmail" class="block text-sm font-semibold text-gray-300 mb-2">Email
                                    Address</label>
                                <input id="userEmail" name="userEmail" type="email" autocomplete="email"
                                    placeholder="you@example.com" required
                                    class="w-full px-4 py-3 bg-navy-800/60 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all" />
                                <p class="text-xs text-gray-500 mt-1.5">The email linked to your Google Sign-In</p>
                            </div>

                            <div>
                                <label for="arcadiaUsername"
                                    class="block text-sm font-semibold text-gray-300 mb-2">Arcadia Username</label>
                                <input id="arcadiaUsername" name="arcadiaUsername" type="text" autocomplete="username"
                                    placeholder="your_username" required
                                    class="w-full px-4 py-3 bg-navy-800/60 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all" />
                                <p class="text-xs text-gray-500 mt-1.5">Your unique display name in the app</p>
                            </div>
                        </div>

                        <div>
                            <label for="deletionType" class="block text-sm font-semibold text-gray-300 mb-2">Deletion
                                Type</label>
                            <select id="deletionType" name="deletionType" required
                                class="w-full px-4 py-3 bg-navy-800/60 border border-white/10 rounded-lg text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all">
                                <option value="full" selected>Full deletion (account + all data)</option>
                                <option value="partial">Partial deletion (specific data only)</option>
                            </select>
                        </div>

                        <div>
                            <label for="notes" class="block text-sm font-semibold text-gray-300 mb-2">Additional Notes
                                (Optional)</label>
                            <textarea id="notes" name="notes" rows="4"
                                placeholder="e.g. 'Only delete my reviews' or context to help us find your account."
                                class="w-full px-4 py-3 bg-navy-800/60 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all resize-vertical"></textarea>
                        </div>

                        <div class="flex items-start gap-3 p-4 bg-white/5 border border-white/10 rounded-lg">
                            <input id="confirm" name="confirm" type="checkbox" required
                                class="mt-1 w-5 h-5 accent-violet-500 cursor-pointer" />
                            <div>
                                <label for="confirm" class="text-sm font-semibold text-white cursor-pointer">I confirm I
                                    own this account</label>
                                <p class="text-xs text-gray-500 mt-1">We may email you to verify ownership before
                                    processing</p>
                            </div>
                        </div>

                        <div class="flex flex-col sm:flex-row gap-4 items-center">
                            <button type="submit"
                                class="w-full sm:w-auto px-8 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white font-body font-bold text-sm tracking-wide rounded-lg hover:from-red-500 hover:to-red-400 transition-all shadow-lg hover:shadow-red-500/50">
                                <i class="fa-solid fa-paper-plane mr-2"></i>SEND REQUEST
                            </button>
                            <button type="button" id="fallbackMailto"
                                class="w-full sm:w-auto px-8 py-3 bg-white/5 border border-white/20 text-white font-body font-semibold text-sm tracking-wide rounded-lg hover:bg-white/10 transition-all">
                                <i class="fa-solid fa-envelope mr-2"></i>USE EMAIL APP
                            </button>
                            <div id="status" class="text-sm font-semibold" role="status" aria-live="polite"></div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Info Sidebar -->
            <div class="lg:col-span-1">
                <div class="glass-card rounded-2xl p-6 sticky top-24">
                    <h3 class="font-display text-2xl mb-4 text-white">PROCESS INFO</h3>

                    <div
                        class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-violet-500/20 text-violet-300 border border-violet-500/30 mb-6">
                        <i class="fa-solid fa-clock text-xs"></i>
                        <span class="font-body text-xs font-semibold">Processing: Up to 30 days</span>
                    </div>

                    <div class="space-y-4 text-sm">
                        <div class="pb-4 border-b border-white/10">
                            <h4 class="font-semibold text-white mb-2">Full Deletion</h4>
                            <p class="text-gray-400 leading-relaxed">We remove your account record, profile data, and
                                personal identifiers from our database.</p>
                        </div>

                        <div class="pb-4 border-b border-white/10">
                            <h4 class="font-semibold text-white mb-2">Partial Deletion</h4>
                            <p class="text-gray-400 leading-relaxed">Use the notes field to specify exactly what to
                                remove (e.g., "Remove all my reviews").</p>
                        </div>

                        <div class="pb-4 border-b border-white/10">
                            <h4 class="font-semibold text-white mb-2">Data Retention</h4>
                            <p class="text-gray-400 leading-relaxed">We keep this request record for 90 days for
                                compliance, then permanently delete it.</p>
                        </div>

                        <div class="pt-2">
                            <p class="text-gray-500 text-xs leading-relaxed">
                                Questions? See our <a href="../privacy.html"
                                    class="text-violet-400 hover:text-violet-300 underline">Privacy Policy</a> or email
                                us at
                                <a href="mailto:support@arcadiatracker.app"
                                    class="text-violet-400 hover:text-violet-300 underline">support@arcadiatracker.app</a>.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="border-t border-white/5 bg-black py-12 px-4 text-center">
        <h2 class="font-display text-[15vw] leading-none text-white/5 select-none pointer-events-none mb-8">ARCADIA</h2>
        <div class="flex justify-center gap-8 text-sm text-gray-500 font-body flex-wrap">
            <a href="../index.html" class="hover:text-white transition-colors">Home</a>
            <a href="../privacy.html" class="hover:text-white transition-colors">Privacy</a>
            <a href="../terms.html" class="hover:text-white transition-colors">Terms</a>
            <a href="../feedback.html" class="hover:text-white transition-colors">Feedback</a>
            <a href="#" class="hover:text-white transition-colors text-red-400">Delete Account</a>
            <a href="https://play.google.com/store/apps/details?id=com.arcadia.game.tracker" class="hover:text-white transition-colors">Get App</a>
            <a href="#" class="hover:text-white transition-colors flex items-center gap-2"><i
                    class="fa-brands fa-discord"></i> Discord</a>
        </div>
        <p class="mt-8 text-gray-700 text-xs">© 2026 Arcadia Inc. All rights reserved.</p>
    </footer>

    <script>
        const DEVELOPER_EMAIL = 'support@arcadiatracker.app';

        function buildRequestText(payload) {
            return [
                'Arcadia deletion request',
                '',
                `Email used in Arcadia: ${payload.userEmail}`,
                `Arcadia username: ${payload.arcadiaUsername}`,
                `Deletion type: ${payload.deletionType}`,
                `Notes: ${payload.notes || '(none)'}`,
                '',
                `Requested at (client): ${new Date().toISOString()}`,
                `User agent: ${navigator.userAgent}`
            ].join('\n');
        }

        function openMailto(payload) {
            const subject = encodeURIComponent('Arcadia - Account/Data Deletion Request');
            const body = encodeURIComponent(buildRequestText(payload));
            window.location.href = `mailto:${DEVELOPER_EMAIL}?subject=${subject}&body=${body}`;
        }

        async function sendViaAppwriteFunction(payload) {
            const APPWRITE_FUNCTION_URL = 'https://69729caf0037838b51e0.fra.appwrite.run';

            if (!APPWRITE_FUNCTION_URL || APPWRITE_FUNCTION_URL === 'REPLACE_WITH_APPWRITE_FUNCTION_URL') {
                throw new Error('Appwrite endpoint not configured');
            }

            const res = await fetch(APPWRITE_FUNCTION_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify({
                    userEmail: payload.userEmail,
                    arcadiaUsername: payload.arcadiaUsername,
                    deletionType: payload.deletionType,
                    notes: payload.notes || ''
                })
            });

            if (!res.ok) {
                throw new Error('Appwrite request failed');
            }

            const text = await res.text();
            try {
                return JSON.parse(text);
            } catch {
                return { raw: text };
            }
        }

        function getPayloadFromForm(form) {
            const userEmail = (form.userEmail.value || '').trim();
            const arcadiaUsername = (form.arcadiaUsername.value || '').trim();
            const deletionType = form.deletionType.value;
            const notes = (form.notes.value || '').trim();

            return { userEmail, arcadiaUsername, deletionType, notes };
        }

        const form = document.getElementById('deleteForm');
        const statusEl = document.getElementById('status');
        const fallbackBtn = document.getElementById('fallbackMailto');

        fallbackBtn.addEventListener('click', () => {
            const payload = getPayloadFromForm(form);
            openMailto(payload);
        });

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            statusEl.textContent = '';
            statusEl.className = 'text-sm font-semibold';

            const payload = getPayloadFromForm(form);

            const btn = form.querySelector('button[type="submit"]');
            const originalText = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-2"></i>SENDING...';

            try {
                await sendViaAppwriteFunction(payload);
                statusEl.textContent = '✓ Sent successfully';
                statusEl.classList.add('text-green-400');
                form.reset();
            } catch (err) {
                statusEl.textContent = '⚠ Opening email app...';
                statusEl.classList.add('text-yellow-400');
                setTimeout(() => openMailto(payload), 300);
            } finally {
                btn.disabled = false;
                btn.innerHTML = originalText;
            }
        });
    </script>
</body>

</html>
